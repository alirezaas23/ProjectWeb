@model IEnumerable<ProjectWeb.Domain.Models.UserApp>
@{
    ViewData["Title"] = "لیست کاربران";
    Layout = "_Layout_Admin";
}

@{
    if (!Model.Any())
    {
        <div class="alert alert-danger">
            کاربری یافت نشد
        </div>
    }
    else
    {
        <div class="input-icon">
            <form asp-controller="ManageUsers" asp-action="SearchUsers" method="get">
                <input type="search" class="form-control input-custom input-pr" placeholder="بر اساس نام، نام خانوادگی، ایمیل و نام کاربری سرچ کنید ..." name="name" id="user-search-input" />
                <i class="fas fa-search icon-for-input" id="user-search-icon"></i>
            </form>
        </div>
        <div class="row">
            @foreach (var item in Model)
            {
                <div class="col-12 col-md-6 col-lg-4 mt-2">
                    <div class="card custom-box-shadow small">
                        <div class="card-body">
                            <div class="text-left">
                                <div class="dropdown">
                                    <i class="fas fa-ellipsis-v dropdown-toggle" data-toggle="dropdown" style="cursor: pointer; font-size: 15px; padding: 10px;"></i>
                                    <div class="dropdown-menu dropdown-menu-right dropdown-no-m">
                                        <a class="dropdown-item menu-text-hover" asp-controller="ManageUsers" asp-action="EditUser" asp-route-id="@item.Id">
                                            <i class="fas fa-circle small-dot"></i>
                                            ویرایش اطلاعات
                                        </a>
                                        <a class="dropdown-item menu-text-hover" asp-controller="ManageUsers" asp-action="DeleteUser" asp-route-id="@item.Id">
                                            <i class="fas fa-circle small-dot"></i>
                                            حذف کاربر
                                        </a>
                                        <a class="dropdown-item menu-text-hover" asp-controller="ManageUsers" asp-action="AddUserToRole" asp-route-id="@item.Id">
                                            <i class="fas fa-circle small-dot"></i>
                                            افزودن مقام
                                        </a>
                                        <a class="dropdown-item menu-text-hover" asp-controller="ManageUsers" asp-action="DeleteUserFromRole" asp-route-id="@item.Id">
                                            <i class="fas fa-circle small-dot"></i>
                                            حذف مقام
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <img src="~/imgs/male-user-100.png" alt="@item.UserName" data-toggle="tooltip" data-placement="top"
                                     title="@item.UserName" class="tool-tip" />
                            </div>
                            <hr />
                            <p>
                                <i class="far fa-user ml-2"></i>
                                نام کاربری :
                                @item.UserName
                            </p>
                            <p>
                                <i class="far fa-envelope ml-2"></i>
                                ایمیل :
                                @item.Email
                            </p>
                            <p>
                                <i class="far fa-user ml-2"></i>
                                نام و نام خانوادگی :
                                @if (item.FirstName == null && item.LastName == null)
                                {
                                    <span class="text-danger">اطلاعاتی وارد نشده است.</span>
                                }
                                else
                                {
                                    <span>@item.FirstName @item.LastName</span>
                                }
                            </p>
                            <p>
                                <i class="fas fa-phone ml-2"></i>
                                شماره تماس :
                                @if (item.PhoneNumber == null)
                                {
                                    <span class="text-danger">شماره تماس وارد نشده است</span>
                                }
                                else
                                {
                                    @item.PhoneNumber
                                }
                            </p>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
}

@section Scripts{
    <script>
        $('.tool-tip').tooltip();
        var userSearchInput = document.getElementById('user-search-input');
        userSearchInput.addEventListener("focusin", changeUserSearchIconColor);
        userSearchInput.addEventListener("focusout", backUserSearchIconColor);

        function changeUserSearchIconColor() {
            let icon = document.getElementById('user-search-icon');
            icon.style.transition = "0.5s";
            icon.style.color = "#47B5FF";
        }

        function backUserSearchIconColor() {
            let icon = document.getElementById('user-search-icon');
            icon.style.color = "#e5edf0";
        }
    </script>
}
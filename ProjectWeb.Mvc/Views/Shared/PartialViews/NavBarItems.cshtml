@using Microsoft.AspNetCore.Identity
@using System.Security.Claims
@using ProjectWeb.Domain.Models
@inject SignInManager<UserApp> _signInManager
@inject UserManager<UserApp> _userManager

<div id="hamburger-icon">
    <i class="fas fa-bars" id="ham-icon" onclick="ShowNav()"></i>
</div>
<ul>
    @{
        var user = await _userManager.FindByIdAsync(User.FindFirstValue(ClaimTypes.NameIdentifier));
        if (_signInManager.IsSignedIn(User))
        {
            <li>
                <div class="dropdown">
                    <a class="dropdown navbar-hover-text" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-caret-down"></i>
                        <span>@user.UserName</span>
                        <img src="~/imgs/icons8-user-30.png" alt="User-Icon" class="mr-1" />
                    </a>

                    <div class="dropdown-menu">
                        @if (User.IsInRole("ادمین"))
                        {
                            <a asp-controller="Admin" asp-action="Index" class="dropdown-item menu-text-hover">
                                <i class="fas fa-circle small-dot"></i>
                                صفحه مدیریت سایت
                            </a>
                        }
                        <a asp-controller="Account" asp-action="ShowProfile" asp-route-id="@user.Id" class="dropdown-item menu-text-hover">
                            <i class="fas fa-circle small-dot"></i>
                            مشاهده حساب کاربری
                        </a>
                        <a asp-controller="Account" asp-action="EditAccount" asp-route-id="@user.Id" class="dropdown-item menu-text-hover">
                            <i class="fas fa-circle small-dot"></i>
                            ویرایش حساب کاربری
                        </a>
                        <a asp-controller="" asp-action="" class="dropdown-item menu-text-hover">
                            <i class="fas fa-circle small-dot"></i>
                            سبد خرید
                        </a>
                        <a class="dropdown-item menu-text-hover">
                            <i class="fas fa-circle small-dot"></i>
                            سفارشات من
                        </a>
                        <a asp-controller="Account" asp-action="LogOut" class="dropdown-item menu-text-hover">
                            <i class="fas fa-circle small-dot"></i>
                            خروج از حساب کاربری
                        </a>
                    </div>
                </div>
            </li>
            <li class="ul-nav-item navbar-hover-text">
                <a asp-controller="Order" asp-action="ShowOrder" class="text-hover">
                    <i class="fas fa-shopping-basket"></i>
                </a>
            </li>
            <li class="ul-nav-item navbar-hover-text">
                <a>
                    ارتباط با ما
                </a>
            </li>
            <li class="ul-nav-item navbar-hover-text">
                <a>
                    درباره ما
                </a>
            </li>
        }
        else
        {
            <li class="ul-nav-item">
                <i class="far fa-user navbar-hover-text"></i>
                <a asp-controller="Account" asp-action="Login" class="navbar-hover-text">ورود</a>
                <a asp-controller="Account" asp-action="Register" class="navbar-hover-text">عضویت</a>
            </li>
            <li class="ul-nav-item navbar-hover-text">
                <a>
                    ارتباط با ما
                </a>
            </li>
            <li class="ul-nav-item navbar-hover-text">
                <a>
                    درباره ما
                </a>
            </li>
        }
    }
</ul>

<div class="logo">
    <a asp-controller="Home" asp-action="Index" title="صفحه خانه">
        <img src="~/imgs/Web Maker-1.png" alt="Logo" />
    </a>
</div>